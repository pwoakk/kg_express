{% extends "base_tabler.html" %}


{% block content %}
    <div class="col-12">
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">Корзина</h3>
                  </div>
                  <div class="card-body border-bottom py-3">
                    <div class="d-flex">
                      <div class="text-muted">
                        Show
                        <div class="mx-2 d-inline-block">
                          <input type="text" class="form-control form-control-sm" value="8" size="3" aria-label="Invoices count">
                        </div>
                        entries
                      </div>
                    </div>
                  </div>
                  <div class="table-responsive">
                    <table class="table card-table table-vcenter text-nowrap datatable table-striped">
                      <thead>
                        <tr>
                          <th class="w-1">№</th>
                          <th>Фотография</th>
                          <th>Название продукта</th>
                          <th>Цена товара</th>
                          <th>Коллиечество</th>
                          <th>Общая цена</th>
                          <th>Действия</th>
                        </tr>
                      </thead>
                      <tbody>
                      {% for item in cart %}
                        <tr>
                          <td><span class="text-muted">{{item.product.id}}</span></td>
                          <td><a href="{% url 'product_detail' item.product.id %}"><img src="{{item.product.image.url}}" width="100"></a></td>
                          <td><a href="{% url 'product_detail' item.product.id %}" class="text-reset" tabindex="-1">{{item.product.name}}</a></td>
                          <td>{{item.price|floatformat:0}} сом</td>
                          <td>
                            {{item.quantity}}
                          </td>
                          <td>{{item.total_price|floatformat:0}} сом</td>
                          <td><a href="{% url 'remove_cart' item.product.id %}" class="btn btn-danger active w-200">
                                Удалить
                              </a>
                          </td>
                        </tr>
                      {% empty %}
                        <tr>
                          <td>Ваша корзина пуста</td>
                        </tr>
                      {% endfor %}
                      </tbody>
                    </table>
                  </div>
                  <div class="card-footer d-flex">
                    <h4>Итого: {{cart.get_total_price|floatformat:0}} сом </h4>
                  </div>
                  <div class="card-footer d-flex align-items-center">
                      <div class="col-6 col-sm-4 col-md-2 col-xl mb-3">
                        <a href="{% url 'clear_cart' %}" class="btn btn-light active w-40">
                          Очистить корзину
                        </a>
                      </div>
                      <div class="col-6 col-sm-4 col-md-2 col-xl mb-3">
                        <a href="#" class="btn btn-primary disabled w-40">
                          Оформить заказ
                        </a>
                      </div>
                  </div>
                </div>
              </div>
{% endblock %}